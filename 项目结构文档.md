# Idrop.in - äº‘é›† | é¡¹ç›®ç»“æ„æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [åç«¯æ¶æ„](#åç«¯æ¶æ„)
- [å‰ç«¯æ¶æ„](#å‰ç«¯æ¶æ„)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [APIè®¾è®¡](#apiè®¾è®¡)
- [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)

---

## é¡¹ç›®æ¦‚è¿°

**Idrop.in - äº‘é›†** æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ™ºèƒ½æ–‡ä»¶æ”¶é›†ä¸ç®¡ç†å¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¤šç§Ÿæˆ·ã€AIæ™ºèƒ½åˆ†ç±»ã€å…¨æ–‡æœç´¢ç­‰é«˜çº§åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼ˆSpring Boot 3.x + Next.js 14ï¼‰
- ğŸ” å®‰å…¨å¯é ï¼ˆJWTè®¤è¯ã€ç«¯åˆ°ç«¯åŠ å¯†ï¼‰
- ğŸ¤– AIæ™ºèƒ½ï¼ˆè‡ªåŠ¨åˆ†ç±»ã€å†…å®¹å®¡æ ¸ï¼‰
- ğŸ” å…¨æ–‡æœç´¢ï¼ˆElasticsearchï¼‰
- ğŸ“Š æ•°æ®åˆ†æï¼ˆå®æ—¶ç»Ÿè®¡ã€å¯è§†åŒ–ï¼‰
- ğŸ“± PWAæ”¯æŒï¼ˆç¦»çº¿è®¿é—®ï¼‰
- ğŸŒ å¤šç§Ÿæˆ·ï¼ˆä¼ä¸šçº§éƒ¨ç½²ï¼‰

---

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|--------|------|
| Spring Boot | 3.2.0 | æ ¸å¿ƒæ¡†æ¶ |
| Java | 17 | å¼€å‘è¯­è¨€ |
| PostgreSQL | 16 | å…³ç³»å‹æ•°æ®åº“ |
| MyBatis Plus | 3.5.5 | ORMæ¡†æ¶ |
| Redis | 7.x | ç¼“å­˜ |
| Elasticsearch | 8.x | æœç´¢å¼•æ“ |
| RabbitMQ | 3.12+ | æ¶ˆæ¯é˜Ÿåˆ— |
| MinIO | 8.5.7 | å¯¹è±¡å­˜å‚¨ |
| Knife4j | 4.4.0 | APIæ–‡æ¡£ |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|--------|------|
| Next.js | 14.0.4 | å‰ç«¯æ¡†æ¶ |
| React | 18.2.0 | UIæ¡†æ¶ |
| TypeScript | 5.x | ç±»å‹ç³»ç»Ÿ |
| Tailwind CSS | 3.3.6 | æ ·å¼æ¡†æ¶ |
| Radix UI | æœ€æ–° | UIç»„ä»¶åº“ |
| shadcn/ui | æœ€æ–° | UIç»„ä»¶åº“ |
| Zustand | 4.4.7 | çŠ¶æ€ç®¡ç† |
| TanStack Query | 5.12.2 | æœåŠ¡ç«¯çŠ¶æ€ |
| Recharts | 2.10.3 | æ•°æ®å¯è§†åŒ– |

---

## é¡¹ç›®ç»“æ„

```
idrop-in/
â”œâ”€â”€ idropin-backend/                    # åç«¯é¡¹ç›®ï¼ˆSpring Bootï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ com/idropin/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ common/              # å…¬å…±æ¨¡å—
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ constant/       # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ exception/      # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ util/          # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ config/        # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ vo/            # è§†å›¾å¯¹è±¡
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ domain/              # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ entity/         # å®ä½“ç±»
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ vo/            # è§†å›¾å¯¹è±¡
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ dto/           # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ enums/         # æšä¸¾ç±»
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ infrastructure/       # åŸºç¡€è®¾æ–½
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ persistence/    # æ•°æ®æŒä¹…åŒ–
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ cache/         # ç¼“å­˜å®ç°
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ mq/            # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ storage/       # æ–‡ä»¶å­˜å‚¨
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ application/         # åº”ç”¨æœåŠ¡
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ service/       # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ facade/        # é—¨é¢æ¥å£
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ interfaces/          # æ¥å£å±‚
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ rest/           # REST API
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ websocket/      # WebSocket
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ scheduler/      # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ resources/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ application.yml         # ä¸»é…ç½®
â”‚   â”‚   â”‚       â””â”€â”€ mapper/              # MyBatisæ˜ å°„
â”‚   â”‚   â””â”€â”€ test/                       # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ pom.xml                          # Mavené…ç½®
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ idropin-frontend/                   # å‰ç«¯é¡¹ç›®ï¼ˆNext.jsï¼‰
â”‚   â”œâ”€â”€ app/                            # App Router
â”‚   â”‚   â”œâ”€â”€ api/                        # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/                       # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ files/                      # æ–‡ä»¶ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ tasks/                      # æ”¶é›†ä»»åŠ¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ shares/                     # åˆ†äº«é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx                  # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ page.tsx                   # é¦–é¡µ
â”‚   â”œâ”€â”€ components/                      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                        # UIåŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/                     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ features/                   # åŠŸèƒ½ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                            # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ api/                        # APIè°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ hooks/                      # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ public/                         # é™æ€èµ„æº
â”‚   â”œâ”€â”€ styles/                         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ idropin-backend-legacy/            # æ—§ç‰ˆåç«¯ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ idropin-frontend-legacy/           # æ—§ç‰ˆå‰ç«¯ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ idropin-server-legacy/            # æ—§ç‰ˆæœåŠ¡ç«¯ï¼ˆå‚è€ƒï¼‰
â”‚
â”œâ”€â”€ docs/                            # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ æ¯•ä¸šè®¾è®¡æ”¹é€ è®¡åˆ’.md
â”‚   â”œâ”€â”€ åˆ›æ–°ç‚¹æ‰©å±•æ–¹æ¡ˆ.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆå¯¹æ¯”åˆ†æ.md
â”‚   â”œâ”€â”€ Idrop.in-äº‘é›†-è¯¦ç»†å®æ–½è®¡åˆ’.md
â”‚   â”œâ”€â”€ Java-vs-NodeJS-OSSå¯¹æ¯”.md
â”‚   â”œâ”€â”€ Javaå†…å­˜ä¼˜åŒ–å¯åŠ¨è„šæœ¬.md
â”‚   â””â”€â”€ é¡¹ç›®ç»“æ„æ–‡æ¡£.md
â”‚
â”œâ”€â”€ README.md                        # é¡¹ç›®ä¸»README
â””â”€â”€ LICENSE                          # è®¸å¯è¯
```

---

## åç«¯æ¶æ„

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¥å£å±‚ (Interfaces)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  REST API   â”‚  â”‚  WebSocket  â”‚  â”‚Schedulerâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 åº”ç”¨æœåŠ¡å±‚ (Application)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Service   â”‚  â”‚   Facade    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 é¢†åŸŸæ¨¡å‹å±‚ (Domain)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Entity    â”‚  â”‚   VO/DTO    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åŸºç¡€è®¾æ–½å±‚ (Infrastructure)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Persistence  â”‚  â”‚   Cache     â”‚             â”‚
â”‚  â”‚    (DB)     â”‚  â”‚  (Redis)    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Storage   â”‚  â”‚     MQ      â”‚             â”‚
â”‚  â”‚  (MinIO)    â”‚  â”‚ (RabbitMQ)  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŒ…ç»“æ„è¯´æ˜

#### common - å…¬å…±æ¨¡å—
- `constant/`: å¸¸é‡å®šä¹‰ï¼ˆResultCodeã€å¸¸é‡å€¼ï¼‰
- `exception/`: å¼‚å¸¸å¤„ç†ï¼ˆBusinessExceptionã€GlobalExceptionHandlerï¼‰
- `util/`: å·¥å…·ç±»ï¼ˆæ—¥æœŸã€å­—ç¬¦ä¸²ã€åŠ å¯†ç­‰ï¼‰
- `config/`: é…ç½®ç±»ï¼ˆSpringé…ç½®ã€å®‰å…¨é…ç½®ï¼‰
- `vo/`: è§†å›¾å¯¹è±¡ï¼ˆResultã€PageResultï¼‰

#### domain - é¢†åŸŸæ¨¡å‹
- `entity/`: å®ä½“ç±»ï¼ˆUserã€Fileã€Taskç­‰ï¼‰
- `vo/`: è§†å›¾å¯¹è±¡ï¼ˆFileInfoã€TaskInfoç­‰ï¼‰
- `dto/`: æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆFileUploadRequestã€TaskCreateRequestç­‰ï¼‰
- `enums/`: æšä¸¾ç±»ï¼ˆUserStatusã€FileStatusç­‰ï¼‰

#### infrastructure - åŸºç¡€è®¾æ–½
- `persistence/`: æ•°æ®æŒä¹…åŒ–ï¼ˆMapperã€Repositoryï¼‰
- `cache/`: ç¼“å­˜å®ç°ï¼ˆRedisé…ç½®ã€ç¼“å­˜å·¥å…·ï¼‰
- `mq/`: æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRabbitMQé…ç½®ã€æ¶ˆæ¯ç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰
- `storage/`: æ–‡ä»¶å­˜å‚¨ï¼ˆMinIOé…ç½®ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ï¼‰

#### application - åº”ç”¨æœåŠ¡
- `service/`: ä¸šåŠ¡æœåŠ¡ï¼ˆUserServiceã€FileServiceç­‰ï¼‰
- `facade/`: é—¨é¢æ¥å£ï¼ˆå¯¹å¤–æä¾›ç»Ÿä¸€æ¥å£ï¼‰

#### interfaces - æ¥å£å±‚
- `rest/`: REST APIï¼ˆControllerï¼‰
- `websocket/`: WebSocketï¼ˆå®æ—¶é€šä¿¡ï¼‰
- `scheduler/`: å®šæ—¶ä»»åŠ¡ï¼ˆæ•°æ®ç»Ÿè®¡ã€æ¸…ç†ä»»åŠ¡ï¼‰

---

## å‰ç«¯æ¶æ„

### ç»„ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡µé¢å±‚ (Pages)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  FilePage   â”‚  â”‚  TaskPage   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                åŠŸèƒ½ç»„ä»¶å±‚ (Features)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚FileUpload   â”‚  â”‚  TaskForm   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 UIç»„ä»¶å±‚ (UI Components)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Button    â”‚  â”‚    Dialog   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å·¥å…·å±‚ (Lib)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   API       â”‚  â”‚   Hooks     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„è¯´æ˜

#### app/ - App Routeré¡µé¢
- `api/`: APIè·¯ç”±ï¼ˆNext.js API Routesï¼‰
- `auth/`: è®¤è¯ç›¸å…³é¡µé¢ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- `files/`: æ–‡ä»¶ç®¡ç†é¡µé¢
- `tasks/`: æ”¶é›†ä»»åŠ¡é¡µé¢
- `shares/`: åˆ†äº«é¡µé¢
- `layout.tsx`: å…¨å±€å¸ƒå±€
- `page.tsx`: é¦–é¡µ

#### components/ - å¯å¤ç”¨ç»„ä»¶
- `ui/`: UIåŸºç¡€ç»„ä»¶ï¼ˆButtonã€Inputã€Dialogç­‰ï¼‰
- `layout/`: å¸ƒå±€ç»„ä»¶ï¼ˆHeaderã€Sidebarã€Footerï¼‰
- `features/`: åŠŸèƒ½ç»„ä»¶ï¼ˆFileUploadã€FileListã€TaskFormç­‰ï¼‰

#### lib/ - å·¥å…·åº“
- `api/`: APIè°ƒç”¨ï¼ˆclient.tsã€files.tsã€tasks.tsç­‰ï¼‰
- `utils/`: å·¥å…·å‡½æ•°ï¼ˆformat.tsã€validation.tsç­‰ï¼‰
- `hooks/`: è‡ªå®šä¹‰Hooksï¼ˆuseAuthã€useFilesç­‰ï¼‰

---

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### ç”¨æˆ·è¡¨ (sys_user)
```sql
CREATE TABLE sys_user (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    avatar_url VARCHAR(500),
    metadata JSONB DEFAULT '{}',
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### æ–‡ä»¶è¡¨ (file)
```sql
CREATE TABLE file (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    original_name VARCHAR(255) NOT NULL,
    file_size BIGINT NOT NULL,
    mime_type VARCHAR(100) NOT NULL,
    storage_path VARCHAR(500) NOT NULL,
    storage_provider VARCHAR(50) DEFAULT 'MINIO',
    metadata JSONB DEFAULT '{}',
    tags TEXT[] DEFAULT '{}',
    category_id UUID REFERENCES file_category(id),
    uploader_id UUID NOT NULL REFERENCES sys_user(id),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### æ–‡ä»¶åˆ†ç±»è¡¨ (file_category)
```sql
CREATE TABLE file_category (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    parent_id UUID REFERENCES file_category(id),
    icon VARCHAR(50),
    color VARCHAR(20),
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### æ–‡ä»¶åˆ†äº«è¡¨ (file_share)
```sql
CREATE TABLE file_share (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    file_id UUID NOT NULL REFERENCES file(id),
    share_code VARCHAR(32) UNIQUE NOT NULL,
    password VARCHAR(255),
    expire_at TIMESTAMP,
    download_limit INTEGER,
    download_count INTEGER DEFAULT 0,
    created_by UUID NOT NULL REFERENCES sys_user(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### æ”¶é›†ä»»åŠ¡è¡¨ (collection_task)
```sql
CREATE TABLE collection_task (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(200) NOT NULL,
    description TEXT,
    deadline TIMESTAMP,
    allow_anonymous BOOLEAN DEFAULT FALSE,
    require_login BOOLEAN DEFAULT TRUE,
    max_file_size BIGINT,
    allowed_types TEXT[],
    created_by UUID NOT NULL REFERENCES sys_user(id),
    status VARCHAR(20) DEFAULT 'OPEN',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### æ–‡ä»¶æäº¤è®°å½•è¡¨ (file_submission)
```sql
CREATE TABLE file_submission (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id UUID NOT NULL REFERENCES collection_task(id),
    file_id UUID NOT NULL REFERENCES file(id),
    submitter_id UUID REFERENCES sys_user(id),
    submitter_name VARCHAR(100),
    submitter_email VARCHAR(100),
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### ç´¢å¼•è®¾è®¡

```sql
-- æ–‡ä»¶è¡¨ç´¢å¼•
CREATE INDEX idx_file_uploader ON file(uploader_id);
CREATE INDEX idx_file_category ON file(category_id);
CREATE INDEX idx_file_tags ON file USING GIN(tags);
CREATE INDEX idx_file_metadata ON file USING GIN(metadata);
CREATE INDEX idx_file_created_at ON file(created_at DESC);

-- å…¨æ–‡æœç´¢ç´¢å¼•
CREATE INDEX idx_file_search ON file
USING GIN(to_tsvector('chinese', name || ' ' || COALESCE(metadata->>'description', '')));

-- æ”¶é›†ä»»åŠ¡ç´¢å¼•
CREATE INDEX idx_collection_task_created_by ON collection_task(created_by);

-- æ–‡ä»¶æäº¤ç´¢å¼•
CREATE INDEX idx_file_submission_task ON file_submission(task_id);
```

---

## APIè®¾è®¡

### RESTful APIè§„èŒƒ

#### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": 1234567890
}
```

#### çŠ¶æ€ç å®šä¹‰

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | æ— è®¿é—®æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### APIç«¯ç‚¹

#### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `POST /api/auth/refresh` - åˆ·æ–°Token
- `POST /api/auth/reset-password` - é‡ç½®å¯†ç 

#### æ–‡ä»¶ç›¸å…³
- `GET /api/files` - è·å–æ–‡ä»¶åˆ—è¡¨
- `POST /api/files` - ä¸Šä¼ æ–‡ä»¶
- `GET /api/files/{id}` - è·å–æ–‡ä»¶è¯¦æƒ…
- `PUT /api/files/{id}` - æ›´æ–°æ–‡ä»¶ä¿¡æ¯
- `DELETE /api/files/{id}` - åˆ é™¤æ–‡ä»¶
- `GET /api/files/{id}/download` - ä¸‹è½½æ–‡ä»¶
- `POST /api/files/batch` - æ‰¹é‡æ“ä½œ

#### æ”¶é›†ä»»åŠ¡ç›¸å…³
- `GET /api/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨
- `POST /api/tasks` - åˆ›å»ºä»»åŠ¡
- `GET /api/tasks/{id}` - è·å–ä»»åŠ¡è¯¦æƒ…
- `PUT /api/tasks/{id}` - æ›´æ–°ä»»åŠ¡
- `DELETE /api/tasks/{id}` - åˆ é™¤ä»»åŠ¡
- `POST /api/tasks/{id}/submit` - æäº¤æ–‡ä»¶

#### åˆ†äº«ç›¸å…³
- `POST /api/shares` - åˆ›å»ºåˆ†äº«
- `GET /api/shares/{code}` - è®¿é—®åˆ†äº«
- `DELETE /api/shares/{id}` - å–æ¶ˆåˆ†äº«

---

## éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¼€å‘ç¯å¢ƒ                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Frontend   â”‚  â”‚   Backend   â”‚             â”‚
â”‚  â”‚  (Next.js)  â”‚  â”‚ (Spring Boot)â”‚             â”‚
â”‚  â”‚  :3000      â”‚  â”‚   :8080     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â†“               â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ PostgreSQL  â”‚  â”‚    Redis    â”‚             â”‚
â”‚  â”‚   :5432     â”‚  â”‚   :6379     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MinIO     â”‚  â”‚ Elasticsearchâ”‚             â”‚
â”‚  â”‚   :9000     â”‚  â”‚   :9200     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç”Ÿäº§ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç”Ÿäº§ç¯å¢ƒ                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    Nginx   â”‚  â”‚   Docker    â”‚             â”‚
â”‚  â”‚   :80/443   â”‚  â”‚  Compose   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â†“               â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Frontend   â”‚  â”‚   Backend   â”‚             â”‚
â”‚  â”‚  (Next.js)  â”‚  â”‚ (Spring Boot)â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â†“               â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ PostgreSQL  â”‚  â”‚    Redis    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MinIO     â”‚  â”‚ Elasticsearchâ”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚  RabbitMQ   â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Docker Composeé…ç½®

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:16
    environment:
      POSTGRES_DB: idropin
      POSTGRES_USER: idropin
      POSTGRES_PASSWORD: idropin123
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  minio:
    image: minio/minio
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - minio_data:/data
    ports:
      - "9000:9000"
      - "9001:9001"

  backend:
    build: ./idropin-backend
    ports:
      - "8080:8080"
    depends_on:
      - postgres
      - redis
      - minio
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/idropin
      SPRING_REDIS_HOST: redis
      MINIO_ENDPOINT: http://minio:9000

  frontend:
    build: ./idropin-frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend

volumes:
  postgres_data:
  redis_data:
  minio_data:
```

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†Idrop.in - äº‘é›†é¡¹ç›®çš„æ•´ä½“æ¶æ„ã€æŠ€æœ¯æ ˆã€é¡¹ç›®ç»“æ„ã€æ•°æ®åº“è®¾è®¡ã€APIè®¾è®¡å’Œéƒ¨ç½²æ¶æ„ã€‚

### å…³é”®è¦ç‚¹

1. **å‰åç«¯åˆ†ç¦»**: é‡‡ç”¨Spring Boot + Next.jsçš„ç°ä»£åŒ–æŠ€æœ¯æ ˆ
2. **åˆ†å±‚æ¶æ„**: åç«¯é‡‡ç”¨DDDåˆ†å±‚è®¾è®¡ï¼Œå‰ç«¯é‡‡ç”¨ç»„ä»¶åŒ–è®¾è®¡
3. **PostgreSQLä¼˜åŠ¿**: JSONBæ”¯æŒå…¨æ–‡æœç´¢ã€æ•°ç»„ç±»å‹æ”¯æŒæ ‡ç­¾ç³»ç»Ÿ
4. **å¾®æœåŠ¡æ¶æ„**: æ”¯æŒç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
5. **å®¹å™¨åŒ–éƒ¨ç½²**: ä½¿ç”¨Docker Composeç®€åŒ–éƒ¨ç½²

### ä¸‹ä¸€æ­¥

- [ ] å®Œæˆåç«¯æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- [ ] å®Œæˆå‰ç«¯æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- [ ] é›†æˆAIåˆ†ç±»åŠŸèƒ½
- [ ] é›†æˆElasticsearchæœç´¢
- [ ] å®Œæˆå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2024-01-01
**ä½œè€…**: Idrop.in Team
