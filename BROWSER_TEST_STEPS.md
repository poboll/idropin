# 浏览器测试步骤

## 前提条件
- 后端运行在 http://localhost:8081
- 前端运行在 http://localhost:5224
- 测试用户：testmore / Test123456

## 测试步骤

### 1. 登录系统
1. 打开浏览器访问：http://localhost:5224/login
2. 输入用户名：`testmore`
3. 输入密码：`Test123456`
4. 点击登录

### 2. 打开任务列表
1. 登录后会自动跳转到 Dashboard
2. 点击"我的任务"或直接访问：http://localhost:5224/dashboard

### 3. 打开更多设置
1. 找到任务"测试任务 - MoreSettings"
2. 点击任务卡片上的"更多设置"按钮（齿轮图标）

### 4. 测试必填信息设置
1. 切换到"必填信息"标签
2. 检查现有字段：
   - ✅ 应该显示：姓名、学号、班级
   - ❌ 不应该显示：undefined、未命名字段
3. 测试添加新字段：
   - 输入"手机号"
   - 点击"添加"按钮
   - 检查是否成功添加
4. 测试编辑字段：
   - 点击字段名称进行编辑
   - 修改为其他名称
   - 检查是否保存
5. 测试删除字段：
   - 点击字段右侧的删除按钮（X）
   - 检查是否成功删除

### 5. 测试批注信息
1. 切换到"批注信息"标签
2. 检查批注文字：
   - ✅ 应该显示："测试批注文字"
3. 检查批注图片：
   - ✅ 应该显示图片预览
   - ✅ 图片应该可以点击放大查看
4. 测试添加新图片：
   - 点击"上传图片"按钮
   - 选择一张图片
   - 检查是否成功添加到预览区
5. 测试删除图片：
   - 鼠标悬停在图片上
   - 点击删除按钮
   - 检查是否成功删除

### 6. 测试限制名单
1. 切换到"限制名单"标签
2. 检查现有名单：
   - ✅ 应该显示：张三、李四
3. 测试添加新成员：
   - 输入"王五"
   - 点击"确定"按钮
   - 检查是否成功添加
4. 测试删除成员：
   - 点击成员右侧的删除按钮
   - 检查是否成功删除

### 7. 测试绑定字段选择器
1. 在"必填信息"标签中
2. 如果启用了名单验证，应该看到"绑定字段"下拉选择器
3. 选择不同的字段（如"学号"）
4. 检查是否正确保存

### 8. 保存设置
1. 点击右下角的"保存设置"按钮
2. 检查是否显示成功提示（绿色通知，右上角）
3. 等待2秒，通知应该自动消失

### 9. 测试任务提交页面
1. 关闭更多设置对话框
2. 点击任务卡片上的"预览"按钮或"分享"按钮复制链接
3. 在新标签页打开任务提交页面
4. 检查以下内容：

#### 必填信息部分
- ✅ 字段标签正确显示（姓名、学号、班级等）
- ✅ 字段标签不显示为 "undefined" 或 "未命名字段"
- ✅ 每个字段都有红色星号（*）表示必填
- ✅ 输入框的 placeholder 正确显示

#### 批注信息部分
- ✅ 批注文字正确显示
- ✅ 批注图片正确显示
- ✅ 图片可以点击查看大图

#### 文件上传部分
- ✅ 文件上传区域正常显示
- ✅ 可以选择文件
- ✅ 文件格式限制正确显示

### 10. 测试提交功能
1. 填写所有必填字段
2. 选择一个文件
3. 点击"提交文件"按钮
4. 检查是否成功提交

## 预期结果

### 成功标准
- ✅ 所有字段名称正确显示
- ✅ 批注文字和图片正确显示
- ✅ 名单功能正常工作
- ✅ 保存和加载功能正常
- ✅ 没有控制台错误
- ✅ 没有显示 "undefined" 或 "未命名字段"

### 常见问题

#### 问题1：字段显示为 "undefined"
- 原因：数据格式不正确
- 解决：重新保存设置，确保使用新格式

#### 问题2：批注图片不显示
- 原因：图片 URL 无效或 Next.js 配置问题
- 解决：检查 next.config.js 中的 images 配置

#### 问题3：名单不显示
- 原因：bindField 数据格式错误
- 解决：重新保存名单

## 测试数据

### 测试任务ID
```
03d8e89e-115c-4fdc-8f71-ca546632a257
```

### 测试用户
```
用户名：testmore
密码：Test123456
```

### 测试 API
```bash
# 获取任务信息
curl -X GET "http://localhost:8081/api/tasks/03d8e89e-115c-4fdc-8f71-ca546632a257/more-info" \
  -H "Authorization: Bearer {token}"
```

## 调试技巧

### 1. 查看控制台
- 打开浏览器开发者工具（F12）
- 切换到 Console 标签
- 检查是否有错误信息

### 2. 查看网络请求
- 打开浏览器开发者工具（F12）
- 切换到 Network 标签
- 刷新页面
- 检查 API 请求和响应

### 3. 查看 React 组件状态
- 安装 React Developer Tools 扩展
- 打开 Components 标签
- 查看组件的 state 和 props

### 4. 硬刷新
- 如果看到旧数据，尝试硬刷新：
  - Mac: Cmd + Shift + R
  - Windows: Ctrl + Shift + R

## 回归测试

在修复后，应该测试以下场景：

1. ✅ 创建新任务并设置必填字段
2. ✅ 编辑现有任务的必填字段
3. ✅ 删除必填字段
4. ✅ 添加批注文字和图片
5. ✅ 启用/禁用名单验证
6. ✅ 添加/删除名单成员
7. ✅ 选择不同的绑定字段
8. ✅ 保存设置后刷新页面
9. ✅ 在提交页面查看所有信息
10. ✅ 提交文件测试完整流程
